# real-time_interaction_search

This repository contains the files and explanation needed to set up a bot that automatically checks transients for late-time detections on a daily basis. Made to find late-time signals as close to real-time as possible, this bot is based on the [late-time_lc_binner](https://github.com/JTerwel/late-time_lc_binner) code with a few additions.

The 3 main python programs:
- **lc_generator.py**: Given a list of objects, each light curve (if it exists) is checked for missing entries. Difference images of the missing epochs are downloaded using [ztfquery](https://github.com/MickaelRigault/ztfquery/tree/master) and forced photometry is performed upon them using [fpbot](https://github.com/simeonreusch/fpbot/tree/main), after which the resulting measurements are added to the existing light curve.
- **Binning_program.py**: The binning program from [late-time_lc_binner](https://github.com/JTerwel/late-time_lc_binner), updated to work in this context (Later versions of the binning program might be available there, adding new use cases. This is running in the real_time mode)
- **auto_check.py**: Checks the results from Binning_program.py and lists objects with late-time signals in the last 28 days (default), and another list for older detections. These lists, as well as notes on the download generated by lc_generator.py are sent by email to the listed recepients.

Besides this are a few bash scripts:
- **scrapper.sh**: Deletes downloaded images and the results of Binning_program.py to create disk space. Only the light curves created by [fpbot](https://github.com/simeonreusch/fpbot/tree/main) are not deleted.
- **run_daily_check.sh**: A script designed to run everything in the correct order on a daily basis. By default it is set up to rotate through 28 lists of objects based on the currend mjd.
- **run_manually.sh**: A manual version of run_daily_check.sh, this script is adapted to be used and edited without breaking run_daily_check.sh by accident. Perfect to use for e.g. tests, manually checking interesting objects, or obtaining a set of light curves for another project. If an email is sent, it is only sent to the first person in the mailing list.

A few notebooks are included as well:
- **list_creator_updater.ipynb**: A notebook used to create / update the lists of objects in the format needed by lc_generator.py.
- **check_lcs.ipynb**: A notebook to quickly check a light curve and the bins output from Binning_program.py.

Finally, a couple of handy files:
- **readme.txt**: A simple text file containing the details of all files in the directory, as well as an installation and use guide. There are a couple of particularities for installing [ztfquery](https://github.com/MickaelRigault/ztfquery/tree/master) and [fpbot](https://github.com/simeonreusch/fpbot/tree/main) correctly. Please refer to their installation guides to solve any problems encountered.
- **testlist.csv**: A small list of 16 ZTF objects used to test the program. If everything works properly, 7 of these should be found to have late-time detections with public IRSA access (see below) when using the default settings. (Possibly more if a signal is observed in data that bcame publicly available after writing this.)
- **objects.csv**: The full list of objects that was used in the real-time monitoring campaign (paper link to be added once its out)

[ztfquery](https://github.com/MickaelRigault/ztfquery/tree/master) requires an IPAC/IRSA account to download the image cutouts. Depending on the type of access your account has, you might be able to retrieve a different amount of images.

A couple of final details need to be set in order to have the python programs work correctly, please see readme.txt to check what needs to be done before running the program for the first time.
